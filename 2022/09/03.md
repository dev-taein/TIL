> 2022-09-03

- ufs(union file system)
  - 도커는 이미지를 레이어 단위로 관리하기 때문에 이미지를 효율적으로 관리하기 위해 레이어를 재사용하고 빌드한다.
  - ufs는 여러 개의 파일 시스템을 하나의 파일 시스템에 마운트 하는 기능이다.<br/>
여러개의 파일 시스템 중 중복된 파일은 마운트된 파일로 덮어쓴다.
  - 도커 이미지 레이어는 각각의 파일 시스템을 겹쳐 놓은 형태와 유사하다.

- UFS IN Docker
  - Docker에서 레이너는 컨테이너 레이어(상위)와 이미지 레이어(하위)로 구분된다.
  - Docker는 바이너리 프로세스와 유사하다.<br/>하나의 바이너리 프로그램이 여러개의 프로세스를 독립적으로 실행될 수 있듯이 도커도 이미지 하나로 여러개의
컨테이너를 독립적으로 실행할 수 있다.
  - 하나의 이미지에서 생성된 컨테이너들이 동일한 파일 시스템을 공유하고 있는데 어떻게 컨테이너가 독립적으로 실행될 수 있을까?<br/>
그것은 UFS의 Cow(Copy On Write)전략과 관련이 있다.
  - UFS는 기존레이어(하위)에서 새로운 레이어(상위)가 쌓일 경우, 하위 레이어는 읽기 전용 상태가 된다.<br/>
또한 상위 레이어가 하위레이어에 직접 쓰기 작접을 수행할 경우, 하위 레이어를 복사(Cow)하여 사용하기 때문에 하위 레이어에는
아무런 영향을 끼치지 않는다.

  - Docker의 모든 레이어 관련된 정보는 호스트 파일 시스템 내의 /var/lib/docker 폴더에 저장된다.
